{
    "name": "Cookie Connector For Themer",
    "slug": "cookie-connector-for-themer",
    "version": "1.3.1",
    "author": "<a href=\"https://www.badabing.nl\">Didou Schol</a>",
    "author_profile": "https://profiles.wordpress.org/badabingbreda/",
    "contributors": {
        "badabingbreda": {
            "profile": "https://profiles.wordpress.org/badabingbreda/",
            "avatar": "https://secure.gravatar.com/avatar/46e6ea3d70978cf6d33a2cd939293c56?s=96&d=monsterid&r=g",
            "display_name": "badabingbreda"
        }
    },
    "requires": "4.7",
    "tested": "5.5.15",
    "requires_php": "5.6.3",
    "requires_plugins": [],
    "compatibility": [],
    "rating": 0,
    "ratings": {
        "5": 0,
        "4": 0,
        "3": 0,
        "2": 0,
        "1": 0
    },
    "num_ratings": 0,
    "support_url": "https://wordpress.org/support/plugin/cookie-connector-for-themer/",
    "support_threads": 0,
    "support_threads_resolved": 0,
    "active_installs": 10,
    "downloaded": 1201,
    "last_updated": "2023-06-01 14:26:00",
    "added": "2019-01-21",
    "homepage": "",
    "sections": {
        "description": "<p>Cookie Connector for (Beaver) Themer</p>\n<h3></h3>\n<h3>Plugin description</h3>\n<p>Cookie Connector for Beaver Themer is an unofficial addon-plugin for the popular Beaver Themer plugin. It allows you to read cookie-values using the Beaver Themer Connector and use Conditional Logic to hide/show seperate nodes (modules, columns and/or rows) using cookie values.</p>\n<p>Cookie Connector also allows you to create cookies using an AJAX call. For security measures you will need to write the AJAX yourself, but an example file on how to do that can be found here, in the example folder:</p>\n<p><a href=\"https://github.com/badabingbreda/cookie-connector-for-themer/\" rel=\"nofollow ugc\">https://github.com/badabingbreda/cookie-connector-for-themer/</a></p>\n<p><strong>Using the Cookie Connector</strong><br />\nYou can display the Cookie Connector wherever you&#8217;d normally insert it as a string, using either the <em>connect</em> or <em>insert</em> button.</p>\n<p><strong>Using the Conditional Logic filter</strong><br />\nBecause cookies have a certain validity, it can&#8217;t return a value when the cookie isn&#8217;t there or has become invalid. The Conditional Logic filter has an extra parameter to set a default value for whenever it doesn&#8217;t return anything. Setting this parameter return that value whenever it doesn&#8217;t exist.</p>\n<p><strong>Writing cookies values</strong><br />\nCookies are written before any headers are written to the visitor&#8217;s browser. The downside to that is that cookies can only be read when the visitor&#8217;s sends a request, since they are sent over WITH the request. This means that you can&#8217;t write a cookie&#8217;s value and immediately read that cookies new value, within a single run of a page-call.</p>\n<p>To work around that, cookies can be written using an AJAX call.<br />\n&#8220;Cookie Connector for Themer&#8221; enqueues a script that registers the <code>cookieConnector</code> object, which handles the security and sending of requests.<br />\nLet&#8217;s consider the following html-code that is used in a HTML module:</p>\n<pre><code>&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'setmycookie' , { cv: 'my cookie value' , valid: 3600 } );\"&gt;Set cookie value&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'unsetmycookie' );\"&gt;Unset cookie value&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n<p>The first parameter is the <code>actionname</code> that is going to be called in the PHP script, so in this example (see below) the part after &#8216;wp_ajax_&#8217; and &#8216;wp_ajax_nopriv_&#8217;.<br />\nYou can also add an extra, optional, third parameter <code>debug</code> that will add a console.log dump of the response, should you need to know what&#8217;s being answered:</p>\n<pre><code>&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'setmycookie' , { cv: 'my cookie value' , valid: 3600 } , true );\"&gt;Set cookie value&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'unsetmycookie', {} , true );\"&gt;Unset cookie value&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n<p><strong>Adding the PHP code to create/change/delete the cookie</strong><br />\nClicking the link wil trigger an AJAX call that will set a cookie on the visitor&#8217;s device, if their browser allows it.</p>\n<p>On the server-side, you will need to add one or two ajax callbacks, depending if the call can be made without being logged in.</p>\n<pre><code>&lt;?php\n    add_action( 'wp_ajax_setmycookie' , 'callback_setmycookie' );\n    add_action( 'wp_ajax_nopriv_setmycookie' , 'callback_setmycookie' );\n    add_action( 'wp_ajax_unsetmycookie' , 'callback_setmycookie' );\n    add_action( 'wp_ajax_nopriv_unsetmycookie' , 'callback_setmycookie' );\n\n    function callback_setmycookie() {\n        // first check if this ajax call is\n        // done using the script belonging to the installation\n        //\n        if( ! check_ajax_referer( 'cookie-security-nonce' , 'security' ) ) {\n            wp_send_json_error( 'Invalid security token sent.' );\n            wp_die();\n        }\n\n        // Check if visitor has accepted the cookies from Cookie Notice plugin\n        // If you're using another plugin, you should write your own check here\n        if ( !function_exists('cn_cookies_accepted') || !cn_cookies_accepted() ) {\n            wp_die();\n        }\n        if ( !defined( 'DOING_AJAX' ) ) define( 'DOING_AJAX' , TRUE );\n\n        // set your cookie name here\n        $cookie_name = 'mylanguage';\n        $default_validity = 60 * 60; // = 60 minutes\n\n        // try to get the cookie_value\n        $cookie_value = isset( $_GET['cv'] ) ? $_GET['cv'] : false;\n        // try to get the cookie validity period. If not default to default validity\n        $cookie_valid = isset( $_GET['valid'] ) ? $_GET['valid'] : $default_validity;\n\n        // if the action is setmycookie we need a cookie_value (cv) because else it will fail. Check for it and return an error if there isn't one.\n        if ( ! $cookie_value &amp;&amp; $_GET['action'] == 'setmycookie' ) {\n            wp_send_json_error( array( 'success' =&gt; false, 'error' =&gt; '402', 'message' =&gt; 'cookie not set, no value given. ( cv )' ) );\n        }\n\n        // check action parameter\n        // UNSET mycookie\n        if ( 'unsetmycookie' == $_GET['action'] ) {\n            setcookie( $cookie_name , 'unset value' , time() - 1 , COOKIEPATH, COOKIE_DOMAIN , isset($_SERVER[\"HTTPS\"]) );\n            wp_send_json( array( 'success' =&gt; true, 'message' =&gt; \"Done unsetting cookie '{$cookie_name}'.\" ) );\n        } else if ( 'setmycookie' == $_GET['action'] ) {\n            setcookie( $cookie_name , $cookie_value , time() + $cookie_valid , COOKIEPATH, COOKIE_DOMAIN , isset($_SERVER[\"HTTPS\"]), true );\n            wp_send_json( array( 'success' =&gt; true, 'message' =&gt; \"Done setting cookie '{$cookie_name}' to value '{$cookie_value}' with validity $cookie_valid seconds.\" ) );\n\n        }\n        wp_die();\n    }\n</code></pre>\n<p>It is advised to use wp_send_json with a &#8216;success&#8217; parameter (either true or false) so that you check it in your javascript and add actions after sending the cookieConnector() command, for instance a reload of the page or forwarding to an url that you received from the server based on the click.<br />\nFor instance, the javascript below will try to create the cookie. When successful it will display an alert on the browser and reload the page after 1.5 seconds.</p>\n<pre><code>&lt;script&gt;\n        function cookie_trigger() {\n            jQuery.when( cookieConnector.set( 'setmycookie', { cv: jQuery( '#selectlanguage' ).val(), valid: 5 * 60 }, 1 ))\n            .done( function( data ) {\n                if ( data.success ) {\n                    alert( data.message + '\\r You can now safely shut down your browser, restart and visit this URL. This selectbox will reflect the last cookie value.' );\n                    setTimeout( function() { location.reload(); }, 1500);\n                }\n            });\n        }\n&lt;/script&gt;\n</code></pre>\n<p>Special thanks<br />\nThanks to 10UP for creating this github action for easy deployment. https://github.com/marketplace/actions/wordpress-plugin-deploy</p>\n<p><strong>version history</strong></p>\n<p><strong>1.3.1</strong><br />\nForgot to update readme.md (this file). Small fix for isset because it&#8217;s not the value that we want (could be falsy) but return if the cookie is set.</p>\n<p><strong>1.3.0</strong><br />\nRewrite of plugin using Autoloader. Fixed isset error.</p>\n<p><strong>1.2.0</strong></p>\n<p>Removed admin_notice so that plugin can be used without Beaver Themer and Beaver Builder too (scripts), for ajax calls.</p>\n<p><strong>1.1.0</strong></p>\n<p>Updated the version because it works on WP 5.4 too</p>\n<p><strong>1.0.1</strong></p>\n<p>Updated example code</p>\n<p><strong>1.0.0</strong></p>\n<p>Initial release (January 18th, 2019)</p>\n"
    },
    "short_description": "Cookie Connector for (Beaver) Themer",
    "description": "<p>Cookie Connector for (Beaver) Themer</p>\n<h3></h3>\n<h3>Plugin description</h3>\n<p>Cookie Connector for Beaver Themer is an unofficial addon-plugin for the popular Beaver Themer plugin. It allows you to read cookie-values using the Beaver Themer Connector and use Conditional Logic to hide/show seperate nodes (modules, columns and/or rows) using cookie values.</p>\n<p>Cookie Connector also allows you to create cookies using an AJAX call. For security measures you will need to write the AJAX yourself, but an example file on how to do that can be found here, in the example folder:</p>\n<p><a href=\"https://github.com/badabingbreda/cookie-connector-for-themer/\" rel=\"nofollow ugc\">https://github.com/badabingbreda/cookie-connector-for-themer/</a></p>\n<p><strong>Using the Cookie Connector</strong><br />\nYou can display the Cookie Connector wherever you&#8217;d normally insert it as a string, using either the <em>connect</em> or <em>insert</em> button.</p>\n<p><strong>Using the Conditional Logic filter</strong><br />\nBecause cookies have a certain validity, it can&#8217;t return a value when the cookie isn&#8217;t there or has become invalid. The Conditional Logic filter has an extra parameter to set a default value for whenever it doesn&#8217;t return anything. Setting this parameter return that value whenever it doesn&#8217;t exist.</p>\n<p><strong>Writing cookies values</strong><br />\nCookies are written before any headers are written to the visitor&#8217;s browser. The downside to that is that cookies can only be read when the visitor&#8217;s sends a request, since they are sent over WITH the request. This means that you can&#8217;t write a cookie&#8217;s value and immediately read that cookies new value, within a single run of a page-call.</p>\n<p>To work around that, cookies can be written using an AJAX call.<br />\n&#8220;Cookie Connector for Themer&#8221; enqueues a script that registers the <code>cookieConnector</code> object, which handles the security and sending of requests.<br />\nLet&#8217;s consider the following html-code that is used in a HTML module:</p>\n<pre><code>&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'setmycookie' , { cv: 'my cookie value' , valid: 3600 } );\"&gt;Set cookie value&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'unsetmycookie' );\"&gt;Unset cookie value&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n<p>The first parameter is the <code>actionname</code> that is going to be called in the PHP script, so in this example (see below) the part after &#8216;wp_ajax_&#8217; and &#8216;wp_ajax_nopriv_&#8217;.<br />\nYou can also add an extra, optional, third parameter <code>debug</code> that will add a console.log dump of the response, should you need to know what&#8217;s being answered:</p>\n<pre><code>&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'setmycookie' , { cv: 'my cookie value' , valid: 3600 } , true );\"&gt;Set cookie value&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"javascript:cookieConnector.set( 'unsetmycookie', {} , true );\"&gt;Unset cookie value&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n<p><strong>Adding the PHP code to create/change/delete the cookie</strong><br />\nClicking the link wil trigger an AJAX call that will set a cookie on the visitor&#8217;s device, if their browser allows it.</p>\n<p>On the server-side, you will need to add one or two ajax callbacks, depending if the call can be made without being logged in.</p>\n<pre><code>&lt;?php\n    add_action( 'wp_ajax_setmycookie' , 'callback_setmycookie' );\n    add_action( 'wp_ajax_nopriv_setmycookie' , 'callback_setmycookie' );\n    add_action( 'wp_ajax_unsetmycookie' , 'callback_setmycookie' );\n    add_action( 'wp_ajax_nopriv_unsetmycookie' , 'callback_setmycookie' );\n\n    function callback_setmycookie() {\n        // first check if this ajax call is\n        // done using the script belonging to the installation\n        //\n        if( ! check_ajax_referer( 'cookie-security-nonce' , 'security' ) ) {\n            wp_send_json_error( 'Invalid security token sent.' );\n            wp_die();\n        }\n\n        // Check if visitor has accepted the cookies from Cookie Notice plugin\n        // If you're using another plugin, you should write your own check here\n        if ( !function_exists('cn_cookies_accepted') || !cn_cookies_accepted() ) {\n            wp_die();\n        }\n        if ( !defined( 'DOING_AJAX' ) ) define( 'DOING_AJAX' , TRUE );\n\n        // set your cookie name here\n        $cookie_name = 'mylanguage';\n        $default_validity = 60 * 60; // = 60 minutes\n\n        // try to get the cookie_value\n        $cookie_value = isset( $_GET['cv'] ) ? $_GET['cv'] : false;\n        // try to get the cookie validity period. If not default to default validity\n        $cookie_valid = isset( $_GET['valid'] ) ? $_GET['valid'] : $default_validity;\n\n        // if the action is setmycookie we need a cookie_value (cv) because else it will fail. Check for it and return an error if there isn't one.\n        if ( ! $cookie_value &amp;&amp; $_GET['action'] == 'setmycookie' ) {\n            wp_send_json_error( array( 'success' =&gt; false, 'error' =&gt; '402', 'message' =&gt; 'cookie not set, no value given. ( cv )' ) );\n        }\n\n        // check action parameter\n        // UNSET mycookie\n        if ( 'unsetmycookie' == $_GET['action'] ) {\n            setcookie( $cookie_name , 'unset value' , time() - 1 , COOKIEPATH, COOKIE_DOMAIN , isset($_SERVER[\"HTTPS\"]) );\n            wp_send_json( array( 'success' =&gt; true, 'message' =&gt; \"Done unsetting cookie '{$cookie_name}'.\" ) );\n        } else if ( 'setmycookie' == $_GET['action'] ) {\n            setcookie( $cookie_name , $cookie_value , time() + $cookie_valid , COOKIEPATH, COOKIE_DOMAIN , isset($_SERVER[\"HTTPS\"]), true );\n            wp_send_json( array( 'success' =&gt; true, 'message' =&gt; \"Done setting cookie '{$cookie_name}' to value '{$cookie_value}' with validity $cookie_valid seconds.\" ) );\n\n        }\n        wp_die();\n    }\n</code></pre>\n<p>It is advised to use wp_send_json with a &#8216;success&#8217; parameter (either true or false) so that you check it in your javascript and add actions after sending the cookieConnector() command, for instance a reload of the page or forwarding to an url that you received from the server based on the click.<br />\nFor instance, the javascript below will try to create the cookie. When successful it will display an alert on the browser and reload the page after 1.5 seconds.</p>\n<pre><code>&lt;script&gt;\n        function cookie_trigger() {\n            jQuery.when( cookieConnector.set( 'setmycookie', { cv: jQuery( '#selectlanguage' ).val(), valid: 5 * 60 }, 1 ))\n            .done( function( data ) {\n                if ( data.success ) {\n                    alert( data.message + '\\r You can now safely shut down your browser, restart and visit this URL. This selectbox will reflect the last cookie value.' );\n                    setTimeout( function() { location.reload(); }, 1500);\n                }\n            });\n        }\n&lt;/script&gt;\n</code></pre>\n<p>Special thanks<br />\nThanks to 10UP for creating this github action for easy deployment. https://github.com/marketplace/actions/wordpress-plugin-deploy</p>\n<p><strong>version history</strong></p>\n<p><strong>1.3.1</strong><br />\nForgot to update readme.md (this file). Small fix for isset because it&#8217;s not the value that we want (could be falsy) but return if the cookie is set.</p>\n<p><strong>1.3.0</strong><br />\nRewrite of plugin using Autoloader. Fixed isset error.</p>\n<p><strong>1.2.0</strong></p>\n<p>Removed admin_notice so that plugin can be used without Beaver Themer and Beaver Builder too (scripts), for ajax calls.</p>\n<p><strong>1.1.0</strong></p>\n<p>Updated the version because it works on WP 5.4 too</p>\n<p><strong>1.0.1</strong></p>\n<p>Updated example code</p>\n<p><strong>1.0.0</strong></p>\n<p>Initial release (January 18th, 2019)</p>\n",
    "download_link": "https://downloads.wordpress.org/plugin/cookie-connector-for-themer.1.3.1.zip",
    "upgrade_notice": [],
    "screenshots": [
        {
            "src": "https://ps.w.org/cookie-connector-for-themer/assets/screenshot-1.png?rev=2920119",
            "caption": ""
        },
        {
            "src": "https://ps.w.org/cookie-connector-for-themer/assets/screenshot-2.png?rev=2920119",
            "caption": ""
        }
    ],
    "tags": {
        "beaver-builder": "beaver builder",
        "beaver-themer": "beaver themer",
        "connector": "connector",
        "cookie": "cookie"
    },
    "stable_tag": "1.3.1",
    "versions": {
        "1.2.2": "https://downloads.wordpress.org/plugin/cookie-connector-for-themer.1.2.2.zip",
        "1.3.0": "https://downloads.wordpress.org/plugin/cookie-connector-for-themer.1.3.0.zip",
        "1.3.1": "https://downloads.wordpress.org/plugin/cookie-connector-for-themer.1.3.1.zip",
        "1.3.2": "https://downloads.wordpress.org/plugin/cookie-connector-for-themer.1.3.2.zip",
        "trunk": "https://downloads.wordpress.org/plugin/cookie-connector-for-themer.zip"
    },
    "business_model": false,
    "repository_url": "",
    "commercial_support_url": "",
    "donate_link": "",
    "banners": {
        "low": "https://ps.w.org/cookie-connector-for-themer/assets/banner-772x250.png?rev=2920119",
        "high": false
    },
    "icons": {
        "1x": "https://ps.w.org/cookie-connector-for-themer/assets/icon-128x128.png?rev=2920119"
    },
    "blocks": [],
    "block_assets": [],
    "author_block_count": 0,
    "author_block_rating": 0,
    "blueprints": [],
    "preview_link": "",
    "language_packs": []
}